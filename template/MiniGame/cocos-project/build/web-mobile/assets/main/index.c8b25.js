window.__require=function e(t,o,n){function c(i,a){if(!o[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var u=o[i]={exports:{}};t[i][0].call(u.exports,function(e){return c(t[i][1][e]||e)},u,u.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)c(n[i]);return c}({1:[function(e,t,o){"use strict";var n,c=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,o)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&u(e,o,t[o]);if(a)for(var o of a(t))l.call(t,o)&&u(e,o,t[o]);return e},d=(e,t)=>r(e,i(t));function y(){return"undefined"!=typeof window&&void 0!==window.gzlJSBridge}function f(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var h,v=function(e=""){const t=(null==e?void 0:e.startsWith("?"))?e.substring(1):e,o={};return t&&t.split("&").forEach(e=>{const[t,n]=e.split("="),c=decodeURIComponent(t.replace(/\+/g," ")),r=decodeURIComponent(n.replace(/\+/g," "));o.hasOwnProperty(c)?o[c]=Array.isArray(o[c])?[...o[c],r]:[o[c],r]:o[c]=r}),o}((null==(n=null==window?void 0:window.location)?void 0:n.search)||""),g=null==v?void 0:v.isDevtool,m=y()||!!(null==(h=null==window?void 0:window.parent)?void 0:h.gzlJSBridge),_=g||m,b=[],O=[],w={},P={},j={calling:{},isCallingKey:"",setCalling(e,t){this.calling[e]=t},send(...e){if(this.isCallingKey&&(null==w?void 0:w[this.isCallingKey]))return w[this.isCallingKey];let t=Math.random().toString(36).slice(2),o={id:t,type:"tyCall",payload:e,callMethod:this.isCallingKey};this.setCalling(t,...e),E.postMessage(o)}},A={callMethod:"",log(){console.log(`The feature\u300cty.${this.callMethod}\u300dis not yet implemented. Please use the real device mode to view it.`)},showToast({title:e}){console.log(e)},setClipboardData({data:e,success:t,fail:o,complete:n}){navigator.clipboard.writeText(e).then(()=>{t&&t(null),n&&n()}).catch(()=>{o&&o({success:!1,errorCode:"CLIPBOARD_ERROR",errorMsg:"navigator.clipboard.writeText failed"})})},apiRequestByAtop({api:e,version:t,postData:o,extData:n,complete:c,success:r,fail:i}){const a=null==P?void 0:P[e];a?(r&&r(a),c&&c()):(i&&i({errMsg:"mock data not found",success:!1}),c&&c())}},E={postMessage:e=>{if(!f(e))return void console.error("data must be an object");if(!e.type)return void console.error("data.type is required");const t={data:{data:JSON.stringify(e)}};y()?window.gzlJSBridge.webviewMessage("postMessage",JSON.stringify(t.data)):window.parent&&window.parent.postMessage(t.data,"*")},onMessage:e=>{var t,o,n,c,r;let i=null;if("string"==typeof e.data)try{i=JSON.parse(e.data)}catch(a){console.error(a)}if(i||(i=e.data),"tyReady"===(null==i?void 0:i.type))return(null==(t=i.data)?void 0:t.syncData)&&Object.entries(i.data.syncData).forEach(([e,t])=>{w[e]=t}),(null==(o=i.data)?void 0:o.language)&&(S.language=null==(n=i.data)?void 0:n.language),(null==(c=i.data)?void 0:c.locales)&&(S.locales=null==(r=i.data)?void 0:r.locales),void b.forEach(e=>e());if("tyResponse"===(null==i?void 0:i.type)||(null==i?void 0:i.id)&&j.calling[i.id]){const{type:e,id:t,success:o,error:n,res:c}=i;o?(j.calling[t].success&&j.calling[t].success(c),j.calling[t].complete&&j.calling[t].complete(c)):(j.calling[t].fail&&j.calling[t].fail(n),j.calling[t].complete&&j.calling[t].complete(n))}else O.forEach(e=>e(i))}},S={language:(null==v?void 0:v.language)||"en",locales:{},t(e,t){var o,n;return(null==(n=null==(o=this.locales)?void 0:o[this.language])?void 0:n[e])||(null==t?void 0:t.defaultValue)||e}};function R(){y()?window.gzlJSBridge.receiveMessageHandler=function(e){var t=new MessageEvent("message",e);E.onMessage(t)}:"undefined"!=typeof window&&window.addEventListener("message",function(e){var t=e.data,o=new MessageEvent("message",t);E.onMessage(o)});const e=console.log;console.log=function(...t){_||e(...t),E.postMessage({type:"tyLog",payload:t})}}function k(){const e=document.createElement("style");e.innerHTML="\nhtml, body {\n  margin: 0;\n  padding: 0;\n}\ncanvas {\n  height: 100vh;\n  width: 100vw;\n}\n",document.getElementsByTagName("head")[0].appendChild(e)}var T=_?j:A,x=new Proxy(T,{get(e,t){if(!_)throw new Error(`ty.${t} showed be used in mini app env`);return T.hasOwnProperty(t)?e[t]:(T.isCallingKey=t,e.send)}}),C=null,D=null;function G(e,t,o){console.log(t,o),ty&&ty[t]?ty[t](d(p({},o),{success:t=>{M({type:"tyResponse",id:e,res:t,success:!0})},fail:t=>{M({type:"tyResponse",id:e,err:t,success:!1})}})):console.log(`ty call ${t} not found`)}function M(e){if(C){if(null===D){const e=ty.getSystemInfoSync();D="devtools"===e.brand}D?C.postMessage({data:{data:e}}):C.postMessage({data:e})}}o.I18n=S,o.inTyDevTool=g,o.inTyMiniApp=_,o.inTyMiniWebview=m,o.miniProgram=E,o.onMessageFromWebView=function(e){const{detail:t}=e;try{let e=null;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(o){console.error(o)}if(e||(e=t.data),null==e?void 0:e.type){const{type:t,id:o,payload:c}=e;try{switch(t){case"tyLog":return void console.log("[WebView]: ",...c);case"tyCall":const{callMethod:n}=e;return void G(o,n,...c)}}catch(n){console.error("ty \u65b9\u6cd5\u8c03\u7528\u5931\u8d25",n)}}}catch(n){console.log("\u6536\u5230webview\u6d88\u606f\uff0c\u89e3\u6790\u9519\u8bef",n)}},o.onMiniEnvReady=function(e){k(),b.push(e),_?R():b.forEach(e=>e())},o.onMiniMessage=function(e){O.push(e)},o.postMessageToWebView=M,o.setAtopMockData=function(e){_||Object.assign(P,e)},o.setLocales=function(e){_||(S.language=e.language,S.locales=e.locales)},o.setWebViewContext=function(e){C=e},o.ty=x},{}],Audio:[function(e,t,o){"use strict";cc._RF.push(t,"24e7cfQDDVFqabBZJ1IKhQg","Audio"),Object.defineProperty(o,"__esModule",{value:!0}),o.Audio=void 0;var n=function(){function e(){this.bgmVolume=1,this.sfxVolume=1,this.bgmAudioID=-1,this.playing="";var e=cc.sys.localStorage.getItem("bgmVolume");null===e&&void 0===e||(this.bgmVolume=parseFloat(e)),null===(e=cc.sys.localStorage.getItem("sfxVolume"))&&void 0===e||(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})}return e.prototype.getUrl=function(e){return cc.url.raw("resources/sounds/"+e)},e.prototype.playBGM=function(e){this.playing=e;var t=this.getUrl(e);console.log(t),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},e.prototype.playSFX=function(e){var t=this.getUrl(e);this.sfxVolume>0&&cc.audioEngine.play(t,!1,this.sfxVolume)},e.prototype.setSFXVolume=function(e){this.sfxVolume!==e&&(this.sfxVolume=e)},e.prototype.setBGMVolume=function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!==e||t)&&(this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.save=function(){cc.sys.localStorage.setItem("sfxVolume",this.sfxVolume),cc.sys.localStorage.setItem("bgmVolume",this.bgmVolume)},e}();o.Audio=n,cc._RF.pop()},{}],DebugController:[function(e,t,o){"use strict";cc._RF.push(t,"a7200QSt8dIBqbF45QVdoN0","DebugController");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.DebugScene=void 0;var i=e("@ray-js/mini-game-sdk"),a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.showToast=function(){i.ty.showToast({icon:"success",title:"Toast Title"})},t.prototype.navigateTo=function(){i.ty.navigateTo({url:"/pages/foo/index"})},t.prototype.getLaunchOptions=function(){i.ty.getLaunchOptions({success:function(e){i.ty.showToast({icon:null,title:JSON.stringify(e)})}})},t.prototype.getUserInfo=function(){i.ty.getUserInfo({success:function(e){i.ty.showToast({icon:null,title:JSON.stringify(e)})}})},t.prototype.backToHome=function(){cc.director.loadScene("menu")},r([s],t)}(cc.Component));o.DebugScene=l,cc._RF.pop()},{"@ray-js/mini-game-sdk":1}],GameBlock:[function(e,t,o){"use strict";cc._RF.push(t,"007507xQ0hEcbmFDxV+eRZJ","GameBlock");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GameBlock=void 0;var i=cc._decorator,a=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxScale=0,t.minScale=0,t.minDistance=0,t.maxDistance=0,t.anchorOffset=0,t.score=1,t.rightAnchorList=[],t.leftAnchorList=[],t.centerAnchor=null,t.p1=null,t.p2=null,t}return c(t,e),t.prototype.getCenterPosition=function(){return this.centerAnchor.parent.convertToWorldSpaceAR(this.centerAnchor.position)},t.prototype.getAnchorLocation=function(e,t){for(var o=this.node.convertToNodeSpaceAR(e),n=cc.v3(o.x,o.y,0),c=t>0?this.rightAnchorList:this.leftAnchorList,r=c[0],i=1;i<c.length;i++)c[i].position.sub(n).mag()<r.position.sub(n).mag()&&(r=c[i]);if(r.position.sub(n).mag()<=this.anchorOffset){var a=r.parent.convertToWorldSpaceAR(r.position);return cc.v2(a.x,a.y)}return null},t.prototype.getLeftTan=function(){return this.p1.y/-this.p1.x},t.prototype.getRightTan=function(){return cc.log(this.p2.y/this.p2.x),this.p2.y/this.p2.x},t.prototype.playScoreAnim=function(){cc.find("score",this.node).getComponent(cc.Label).string="+"+this.score,cc.find("score",this.node).getComponent(cc.Animation).play()},r([s(cc.Float)],t.prototype,"maxScale",void 0),r([s(cc.Float)],t.prototype,"minScale",void 0),r([s(cc.Float)],t.prototype,"minDistance",void 0),r([s(cc.Float)],t.prototype,"maxDistance",void 0),r([s(cc.Float)],t.prototype,"anchorOffset",void 0),r([s(cc.Integer)],t.prototype,"score",void 0),r([s([cc.Node])],t.prototype,"rightAnchorList",void 0),r([s([cc.Node])],t.prototype,"leftAnchorList",void 0),r([s(cc.Node)],t.prototype,"centerAnchor",void 0),r([s(cc.Node)],t.prototype,"p1",void 0),r([s(cc.Node)],t.prototype,"p2",void 0),r([a],t)}(cc.Component);o.GameBlock=l,cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"670f2hksQ5Lw7vOXZiYo8c+","GameController");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var i=e("@ray-js/mini-game-sdk"),a=e("./G"),s=e("./GameOver"),l=e("./GameStage"),u=e("./events/PlayerDieEvent"),p=e("./events/PlayerJumpSuccessEvent"),d=cc._decorator,y=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameStage=null,t.scoreLabel=null,t.gameOver=null,t.score=0,t}return c(t,e),t.prototype.onLoad=function(){cc.sys.isMobile&&(cc.find("Canvas").getComponent(cc.Canvas).fitHeight=!1,cc.find("Canvas").getComponent(cc.Canvas).fitWidth=!0)},t.prototype.start=function(){this.addListeners(),this.startGame()},t.prototype.startGame=function(){this.gameStage.reset(),this.gameStage.enableTouch()},t.prototype.onPlayerJumpSuccess=function(e){var t=this,o=e.score;this.addSocre(o),this.gameStage.updateStage(function(){t.gameStage.addBlock()})},t.prototype.addSocre=function(e){this.score+=e,this.scoreLabel.string=i.I18n.t("game.score",{defaultValue:"Score: "})+this.score},t.prototype.onOver=function(){var e=this;this.gameStage.disableTouch(),setTimeout(function(){e.gameOver.show(e.score,e.onRestart,e)},500)},t.prototype.onRestart=function(){this.gameOver.hide(),cc.director.loadScene("game")},t.prototype.addListeners=function(){a.G.on(u.PlayerDieEvent.NAME,this.onOver,this),a.G.on(p.PlayerJumpSuccessEvent.NAME,this.onPlayerJumpSuccess,this)},t.prototype.removeListeners=function(){a.G.off(u.PlayerDieEvent.NAME,this.onOver,this),a.G.off(p.PlayerJumpSuccessEvent.NAME,this.onPlayerJumpSuccess,this)},t.prototype.backToHome=function(){cc.director.loadScene("menu")},r([f(l.GameStage)],t.prototype,"gameStage",void 0),r([f(cc.Label)],t.prototype,"scoreLabel",void 0),r([f(s.GameOver)],t.prototype,"gameOver",void 0),r([y],t)}(cc.Component);o.GameController=h,cc._RF.pop()},{"./G":"G","./GameOver":"GameOver","./GameStage":"GameStage","./events/PlayerDieEvent":"PlayerDieEvent","./events/PlayerJumpSuccessEvent":"PlayerJumpSuccessEvent","@ray-js/mini-game-sdk":1}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"b702fWA3yZGha6sOqGGOWpd","GameOver");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GameOver=void 0;var i=e("@ray-js/mini-game-sdk"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelText=null,t.btnRestart=null,t}return c(t,e),t.prototype.show=function(e,t,o){this.node.active=!0,this.labelText.string=i.I18n.t("game.score",{defaultValue:"Score: "})+e,this.btnRestart.once(cc.Node.EventType.TOUCH_END,t,o)},t.prototype.hide=function(){this.node.active=!1},r([l(cc.Label)],t.prototype,"labelText",void 0),r([l(cc.Node)],t.prototype,"btnRestart",void 0),r([s],t)}(cc.Component);o.GameOver=u,cc._RF.pop()},{"@ray-js/mini-game-sdk":1}],GamePlayer:[function(e,t,o){"use strict";cc._RF.push(t,"9bd49uTlnBLrLGadJkec3pf","GamePlayer");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GamePlayer=void 0;var i=cc._decorator,a=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jumpDistance=0,t.power=0,t.initSpeed=0,t.speed=0,t.isReadyJump=!1,t.direction=1,t.readyJumpAudio=null,t.readyJumpAudioId=-1,t.jumpAudio=null,t.jumpAudioId=-1,t}return c(t,e),t.prototype.onLoad=function(){},t.prototype.readyJump=function(){this.readyJumpAudioId=cc.audioEngine.play(this.readyJumpAudio,!1,1),cc.find("rotateAnchor/sprite",this.node).runAction(cc.scaleTo(2,1,.5)),this.speed=this.initSpeed,this.isReadyJump=!0},t.prototype.jumpTo=function(e,t,o){var n=this,c=e.worldPos;e.sameBlock,cc.audioEngine.stop(this.readyJumpAudioId),this.jumpAudioId=cc.audioEngine.play(this.jumpAudio,!1,1),cc.find("rotateAnchor/sprite",this.node).stopAllActions();var r=this.node.parent.convertToNodeSpaceAR(c);this.node.color=cc.Color.WHITE,this.isReadyJump=!1;var i=cc.scaleTo(1,1,1),a=cc.jumpTo(.5,r,200,1),s=cc.rotateBy(.5,360*this.direction),l=cc.callFunc(function(){n.direction=Math.random()>.5?1:-1,n.speed=0,n.jumpDistance=0,t()},o);cc.find("rotateAnchor/sprite",this.node).runAction(i),cc.find("rotateAnchor",this.node).runAction(s),this.node.runAction(cc.sequence(a,l))},t.prototype.update=function(e){this.isReadyJump&&(this.speed+=e*this.power,this.jumpDistance+=this.speed*e)},r([s(cc.Float)],t.prototype,"jumpDistance",void 0),r([s(cc.Integer)],t.prototype,"power",void 0),r([s(cc.Float)],t.prototype,"initSpeed",void 0),r([s(cc.AudioClip)],t.prototype,"readyJumpAudio",void 0),r([s(cc.AudioClip)],t.prototype,"jumpAudio",void 0),r([a],t)}(cc.Component);o.GamePlayer=l,cc._RF.pop()},{}],GameStage:[function(e,t,o){"use strict";cc._RF.push(t,"40b804EvnJPrIJHFGe/MMZY","GameStage");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.GameStage=void 0;var i=e("./G"),a=e("./GamePlayer"),s=e("./GameBlock"),l=e("./events/PlayerDieEvent"),u=e("./events/PlayerJumpSuccessEvent"),p=cc._decorator,d=p.ccclass,y=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.leftOrigin=cc.v3(),t.rightOrigin=cc.v3(),t.blockLayer=null,t.arrayRatio=.556047197640118,t.blockList=[],t.currBlock=null,t.nextBlock=null,t}return c(t,e),t.prototype.reset=function(){this.blockLayer.removeAllChildren();var e=cc.instantiate(this.blockList[0]);this.blockLayer.addChild(e);var t=e.getComponent(s.GameBlock);e.setPosition(this.blockLayer.parent.convertToNodeSpaceAR(this.leftOrigin)),this.currBlock=t,this.nextBlock=t,this.player.node.setPosition(this.node.parent.convertToNodeSpaceAR(this.currBlock.getCenterPosition())),this.addBlock()},t.prototype.enableTouch=function(){cc.find("Canvas").on(cc.Node.EventType.TOUCH_START,this.onReadyJump,this),cc.find("Canvas").on(cc.Node.EventType.TOUCH_END,this.onJump,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.disableTouch=function(){cc.find("Canvas").targetOff(this),cc.systemEvent.targetOff(this)},t.prototype.onKeyDown=function(e){e.keyCode===cc.macro.KEY.space&&this.onReadyJump()},t.prototype.onKeyUp=function(e){e.keyCode===cc.macro.KEY.space&&this.onJump()},t.prototype.onReadyJump=function(){this.player.readyJump()},t.prototype.onJump=function(){var e=this,t=this.player.jumpDistance,o=this.player.direction,n=cc.v2(this.player.node.x+t*o,this.player.node.y+t*this.arrayRatio),c=this.player.node.parent.convertToWorldSpaceAR(n),r=this.nextBlock.getAnchorLocation(c,o);this.currBlock.getAnchorLocation(c,o),null!==r?this.player.jumpTo({worldPos:r,sameBlock:!1},function(){e.currBlock=e.nextBlock,e.currBlock.playScoreAnim(),i.G.dispatchEvent(new u.PlayerJumpSuccessEvent(e.currBlock.score))}):this.player.jumpTo({worldPos:c,sameBlock:!1},function(){i.G.dispatchEvent(new l.PlayerDieEvent)})},t.prototype.addBlock=function(){var e=Math.floor(Math.random()*this.blockList.length),t=cc.instantiate(this.blockList[e]);this.blockLayer.addChild(t);var o=t.getComponent(s.GameBlock),n=o.minScale+Math.random()*(o.maxScale-o.minScale),c=o.minDistance+Math.random()*(o.maxDistance-o.minDistance);return t.scale=n,this.player.direction>0?(t.x=this.currBlock.node.x+c,t.y=this.currBlock.node.y+c*this.arrayRatio):(t.x=this.currBlock.node.x-c,t.y=this.currBlock.node.y+c*this.arrayRatio),this.currBlock=this.nextBlock,this.nextBlock=o,o},t.prototype.removeBlock=function(){},t.prototype.checkOver=function(){return this.player.node.position.sub(this.currBlock.node.position).mag()>this.currBlock.node.width/2*this.currBlock.node.scale},t.prototype.updateStage=function(e,t){var o,n=this.player.node.parent.convertToWorldSpaceAR(this.player.node.position);o=this.player.direction>0?n.sub(this.leftOrigin):n.sub(this.rightOrigin);var c=cc.callFunc(e,t),r=this.node.position.sub(o),i=cc.sequence(cc.moveTo(.5,cc.v2(r.x,r.y)),c);this.node.runAction(i)},r([y(a.GamePlayer)],t.prototype,"player",void 0),r([y(cc.Vec3)],t.prototype,"leftOrigin",void 0),r([y(cc.Vec3)],t.prototype,"rightOrigin",void 0),r([y(cc.Node)],t.prototype,"blockLayer",void 0),r([y(cc.Float)],t.prototype,"arrayRatio",void 0),r([y([cc.Prefab])],t.prototype,"blockList",void 0),r([d],t)}(cc.Component);o.GameStage=f,cc._RF.pop()},{"./G":"G","./GameBlock":"GameBlock","./GamePlayer":"GamePlayer","./events/PlayerDieEvent":"PlayerDieEvent","./events/PlayerJumpSuccessEvent":"PlayerJumpSuccessEvent"}],G:[function(e,t,o){"use strict";cc._RF.push(t,"4eb76347PJBwZKH/rdxU5j/","G");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.G=o.Global=void 0;var r=function(e){function t(){return e.call(this)||this}return c(t,e),t.Instance=new t,t}(cc.EventTarget);o.Global=r,o.G=r.Instance,cc._RF.pop()},{}],LabelI18n:[function(e,t,o){"use strict";cc._RF.push(t,"f2561sfUI5MTIwrmS6JAbTn","LabelI18n");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("@ray-js/mini-game-sdk"),a=cc._decorator,s=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.languageKey="",t.label=null,t._lableTextAsDefault=!0,t}return c(t,e),t.prototype.onLoad=function(){this.label||(this.label=this.getComponent(cc.Label)),this.updateText()},t.prototype.updateText=function(){var e=i.I18n.t(this.languageKey);console.log("LabelI18n",this.languageKey,e),!this._lableTextAsDefault||e&&e!==this.languageKey||(e=""),this.label&&(this.label.string=e||this.label.string)},r([l({tooltip:"The key to retrieve the language-specific text."})],t.prototype,"languageKey",void 0),r([l(cc.Label)],t.prototype,"label",void 0),r([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"@ray-js/mini-game-sdk":1}],MenuController:[function(e,t,o){"use strict";cc._RF.push(t,"d53944AFM9HprOUPOgbFtLe","MenuController");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var c,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(r<3?c(i):r>3?c(t,o,i):c(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(c,r){function i(e){try{s(n.next(e))}catch(t){r(t)}}function a(e){try{s(n.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,a)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,c,r,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(c=2&r[0]?n.return:r[0]?n.throw||((c=n.return)&&c.call(n),0):n.next)&&!(c=c.call(n,r[1])).done)return c;switch(n=0,c&&(r=[2&r[0],c.value]),r[0]){case 0:case 1:c=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,n=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(c=(c=i.trys).length>0&&c[c.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!c||r[1]>c[0]&&r[1]<c[3])){i.label=r[1];break}if(6===r[0]&&i.label<c[1]){i.label=c[1],c=r;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(r);break}c[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(a){r=[6,a],n=0}finally{o=c=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.MenuScene=void 0;var s=e("@ray-js/mini-game-sdk"),l=cc._decorator,u=l.ccclass,p=l.property,d=new Promise(function(e){s.onMiniEnvReady(function(){e(!0)})}),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeLoading=null,t}return c(t,e),t.prototype.onLoad=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,d];case 1:return e.sent(),console.log("MenuScene onMiniEnvReady"),cc.sys.isMobile&&(cc.find("Canvas").getComponent(cc.Canvas).fitHeight=!1,cc.find("Canvas").getComponent(cc.Canvas).fitWidth=!0),this.nodeLoading.active=!1,[2]}})})},t.prototype.onBtnStart=function(){this.nodeLoading.active=!1,cc.director.loadScene("game")},t.prototype.onBtnDebug=function(){console.log("onBtnDebug")},r([p(cc.Node)],t.prototype,"nodeLoading",void 0),r([u],t)}(cc.Component);o.MenuScene=y,cc._RF.pop()},{"@ray-js/mini-game-sdk":1}],PlayerDieEvent:[function(e,t,o){"use strict";cc._RF.push(t,"0598aP9w/pK4qHQkgTWsX9/","PlayerDieEvent");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerDieEvent=void 0;var r=function(e){function t(){return e.call(this,t.NAME,!0)||this}return c(t,e),t.NAME="PlayerDie",t}(cc.Event.EventCustom);o.PlayerDieEvent=r,cc._RF.pop()},{}],PlayerJumpSuccessEvent:[function(e,t,o){"use strict";cc._RF.push(t,"c94d8XNGTlNI5QI/kwQbDIQ","PlayerJumpSuccessEvent");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerJumpSuccessEvent=void 0;var r=function(e){function t(o){var n=e.call(this,t.NAME,!0)||this;return n.score=o,n}return c(t,e),t.NAME="PlayerJumpSuccess",t}(cc.Event.EventCustom);o.PlayerJumpSuccessEvent=r,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"b9ea104PmRKm6YrKlBtItu+","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","DebugController","G","GameBlock","GameController","GameOver","GamePlayer","GameStage","MenuController","PlayerDieEvent","PlayerJumpSuccessEvent","Audio","LabelI18n"]);